<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zomato Cart</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css">
    <style>
        .item-img {
            height: 50px;
            width: 60px;
            object-fit: cover;
        }

        .qty-btn {
            border: none;
            background: none;
            font-size: 1.2rem;
            color: #dc3545;
        }

        .total-highlight {
            transition: background-color 0.3s;
        }

        .flash {
            background-color: #ffeeba;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-dark bg-danger p-3">
        <div class="container-fluid">
            <a href="#" class="navbar-brand">Zomato</a>
        </div>
    </nav>

    <div class="container-fluid my-4 mb-5 px-2">

        <h2 class="mb-3">Main Course</h2>
        <div class="table-responsive py-0 px-0">
            <table class="table text-center align-middle">
                <thead>
                    <tr class="table-danger">
                        <th>Item-ID</th>
                        <th>Item</th>
                        <th>Image</th>
                        <th>Price</th>
                        <th>Qty</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody id="main-course-body"></tbody>
            </table>
        </div>

        <h2 class="mb-3">Ice Creams & Cakes </h2>
        <div class="table-responsive mb-3 py-0 px-0">
            <table class="table text-center align-middle">
                <thead>
                    <tr class="table-info">
                        <th>Item-ID</th>
                        <th>Item</th>
                        <th>Image</th>
                        <th>Price</th>
                        <th>Qty</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody id="dessert-body"></tbody>
            </table>
        </div>

        <div class="border-top pt-3 d-flex justify-content-end align-items-center gap-3">
            <h4 class="mb-0">Grand Total: <i class="bi bi-currency-rupee"></i><span id="grand-total">0</span>/-</h4>
            <button class="btn btn-dark" id="buy-all">Buy</button>
        </div>

    </div>

    <script>
        const mainCourseItems = [
            {
                id: 101,
                name: "Chicken Biryani",
                price: 369,
                image: "https://www.cubesnjuliennes.com/wp-content/uploads/2020/07/Chicken-Biryani-Recipe.jpg"
            },
            {
                id: 102,
                name: "Paneer Butter Masala",
                price: 299,
                image: "https://www.indianhealthyrecipes.com/wp-content/uploads/2023/07/paneer-butter-masala-recipe.jpg"
            },
            {
                id: 103,
                name: "Mushroom Biryani",
                price: 420,
                image: "https://www.indianveggiedelight.com/wp-content/uploads/2019/09/mushroom-biryani-featured.jpg"
            }
        ];

        const dessertItems = [
            {
                id: 201,
                name: "Choco Fudge",
                price: 149,
                image: "https://bakingamoment.com/wp-content/uploads/2024/12/IMG_4427-fudge-recipe-1200px.jpg"
            },
            {
                id: 202,
                name: "Black Currant",
                price: 99,
                image: "https://5.imimg.com/data5/AU/CD/YR/SELLER-26783608/black-currant-iceceam.jpg"
            },
            {
                id: 203,
                name: "Vanilla Ice Cream",
                price: 79,
                image: "https://cdn.loveandlemons.com/wp-content/uploads/2023/06/homemade-ice-cream.jpg"
            }
        ];

        const mainBody = document.getElementById("main-course-body");
        const dessertBody = document.getElementById("dessert-body");
        const grandTotalEl = document.getElementById("grand-total");
        const buyAllBtn = document.getElementById("buy-all");

        const state = {};

        function formatPrice(price) {
            return price.toLocaleString("en-IN");
        }

        function updateGrandTotal() {
            const total = Object.values(state).reduce((sum, item) => sum + item.qty * item.price, 0);
            grandTotalEl.textContent = formatPrice(total);
        }

        function updateItemTotal(id, totalEl) {
            const total = state[id].qty * state[id].price;
            totalEl.textContent = formatPrice(total);
            totalEl.classList.add("flash");
            setTimeout(() => totalEl.classList.remove("flash"), 200);
        }

        function createRow(item, container) {
            state[item.id] = { ...item, qty: 0 };

            const row = document.createElement("tr");

            row.innerHTML = `
        <td>${item.id}</td>
        <td>${item.name}</td>
        <td><img src="${item.image}" alt="${item.name}" class="item-img"></td>
        <td><i class="bi bi-currency-rupee"></i>${formatPrice(item.price)}/-</td>
        <td>
          <button class="qty-btn" id="minus-${item.id}"><i class="bi bi-dash-circle"></i></button>
          <span id="qty-${item.id}" class="mx-2">0</span>
          <button class="qty-btn" id="plus-${item.id}"><i class="bi bi-plus-circle"></i></button>
        </td>
        <td>
          <i class="bi bi-currency-rupee"></i><span id="total-${item.id}" class="total-highlight">0</span>/-
        </td>
      `;

            container.appendChild(row);

            const qtyEl = document.getElementById(`qty-${item.id}`);
            const totalEl = document.getElementById(`total-${item.id}`);
            const plusBtn = document.getElementById(`plus-${item.id}`);
            const minusBtn = document.getElementById(`minus-${item.id}`);

            plusBtn.onclick = () => {
                state[item.id].qty += 1;
                qtyEl.textContent = state[item.id].qty;
                updateItemTotal(item.id, totalEl);
                updateGrandTotal();
            };

            minusBtn.onclick = () => {
                if (state[item.id].qty > 0) {
                    state[item.id].qty -= 1;
                    qtyEl.textContent = state[item.id].qty;
                    updateItemTotal(item.id, totalEl);
                    updateGrandTotal();
                }
            };
        }

        
        mainCourseItems.forEach(item => createRow(item, mainBody));
        dessertItems.forEach(item => createRow(item, dessertBody));
        updateGrandTotal();

        
        buyAllBtn.onclick = () => {
            const orderedItems = Object.values(state)
                .filter(item => item.qty > 0)
                .map(item => `${item.qty} x ${item.name} = ₹${formatPrice(item.qty * item.price)}`)
                .join("\n");

            const total = Object.values(state).reduce((sum, item) => sum + item.qty * item.price, 0);

            if (total === 0) {
                alert("Please add items to your cart before buying.");
                return;
            }

            alert(`Order Summary:\n\n${orderedItems}\n\nTotal: ₹${formatPrice(total)}\n\n Thank you for your order!`);
        };
    </script>
</body>

</html>